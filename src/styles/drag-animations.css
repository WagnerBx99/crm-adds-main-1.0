/* üéØ Anima√ß√µes Ultra-Suaves para Drag & Drop - VERS√ÉO CORRIGIDA */

/* Configura√ß√£o base para performance - SEM transforms que conflitam com a biblioteca */
.kanban-card {
  /* REMOVIDO: will-change: transform - a biblioteca gerencia isso */
  transform-origin: center;
  /* REMOVIDO: backface-visibility: hidden - pode causar problemas de stacking */
}

/* REMOVIDO: Regras que for√ßavam !important em seletores internos da biblioteca */
/* A biblioteca @hello-pangea/dnd precisa de controle exclusivo sobre transforms */

/* Estado de hover MUITO sutil - APENAS quando n√£o est√° em drag */
.kanban-card:hover:not([data-rbd-drag-handle-draggable-id]) {
  box-shadow: 0 4px 12px -3px rgba(0, 0, 0, 0.08),
              0 2px 4px -2px rgba(0, 0, 0, 0.05);
  transition: box-shadow 150ms cubic-bezier(0.2, 0, 0, 1);
}

/* Card sendo arrastado - SEM transforms que conflitam com a biblioteca */
.kanban-card--dragging {
  opacity: 0.85;
  /* REMOVIDO: transform: rotate(5deg) scale(1.05) - CONFLITA COM A BIBLIOTECA! */
  box-shadow: 0 12px 28px rgba(0, 0, 0, 0.2);
  z-index: 9999 !important;
  cursor: grabbing !important;
  border: 2px solid rgb(59, 130, 246);
  /* Efeito visual alternativo sem usar transform */
  filter: brightness(1.02);
}

/* Ghost placeholder */
.kanban-card--placeholder {
  opacity: 0.3;
  background: linear-gradient(135deg, 
    rgba(59, 130, 246, 0.1) 0%,
    rgba(147, 197, 253, 0.1) 100%);
  border: 2px dashed rgb(59, 130, 246);
  transition: all 200ms cubic-bezier(0.4, 0, 0.2, 1);
}

/* Coluna destacada durante drag over - MINIMALISTA */
.kanban-column--drag-over {
  background: linear-gradient(135deg, 
    rgba(59, 130, 246, 0.02) 0%,
    rgba(147, 197, 253, 0.02) 100%);
  border: 1px solid rgba(59, 130, 246, 0.2);
  transition: all 200ms cubic-bezier(0.2, 0, 0, 1);
  box-shadow: 0 0 0 1px rgba(59, 130, 246, 0.1);
}

/* Cabe√ßalho da coluna durante drag over */
.kanban-column--drag-over .kanban-column__header {
  background: rgba(59, 130, 246, 0.05);
  border-radius: 8px;
  transition: background 200ms cubic-bezier(0.2, 0, 0, 1);
}

/* Smooth scroll durante drag */
.kanban-board--dragging {
  scroll-behavior: auto;
}

.kanban-board--dragging .kanban-column {
  pointer-events: auto;
}

/* Anima√ß√£o de entrada para novos cards - ULTRA SUTIL */
.kanban-card--entering {
  animation: cardEnterMinimal 200ms cubic-bezier(0.2, 0, 0, 1);
}

@keyframes cardEnterMinimal {
  0% {
    opacity: 0;
  }
  100% {
    opacity: 1;
  }
}

/* Indicador de drop zone */
.drop-zone-indicator {
  height: 4px;
  background: linear-gradient(90deg, 
    transparent 0%,
    rgb(59, 130, 246) 20%,
    rgb(59, 130, 246) 80%,
    transparent 100%);
  border-radius: 2px;
  margin: 4px 0;
  opacity: 0;
  transition: opacity 200ms cubic-bezier(0.4, 0, 0.2, 1);
}

.drop-zone-indicator--active {
  opacity: 1;
  animation: pulse 1s infinite;
}

@keyframes pulse {
  0%, 100% {
    opacity: 1;
  }
  50% {
    opacity: 0.7;
  }
}

/* Otimiza√ß√µes para mobile */
@media (max-width: 768px) {
  .kanban-card:hover:not([data-rbd-drag-handle-draggable-id]) {
    transition-duration: 100ms;
  }
}

/* Melhorias para acessibilidade */
@media (prefers-reduced-motion: reduce) {
  .kanban-card,
  .kanban-column--drag-over {
    transition: none !important;
    animation: none !important;
  }
}

/* Auto-scroll indicators */
.auto-scroll-indicator {
  position: absolute;
  width: 100%;
  height: 40px;
  background: linear-gradient(to bottom, 
    rgba(59, 130, 246, 0.1) 0%,
    transparent 100%);
  pointer-events: none;
  opacity: 0;
  transition: opacity 200ms ease-out;
  z-index: 10;
}

.auto-scroll-indicator--top {
  top: 0;
  background: linear-gradient(to bottom, 
    rgba(59, 130, 246, 0.1) 0%,
    transparent 100%);
}

.auto-scroll-indicator--bottom {
  bottom: 0;
  background: linear-gradient(to top, 
    rgba(59, 130, 246, 0.1) 0%,
    transparent 100%);
}

.auto-scroll-indicator--active {
  opacity: 1;
}

/* Performance optimizations - sem for√ßar transforms */
.kanban-board {
  contain: layout style paint;
}

.kanban-column {
  contain: layout style;
}

/* Card overlay INSTANT√ÇNEO */
.kanban-card-drag-overlay-instantaneous {
  pointer-events: none;
  z-index: 9999;
}

/* Garantir que o item sendo arrastado esteja acima de tudo */
[data-rbd-draggable-context-id] {
  z-index: 9999 !important;
}
